!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=210)}({210:function(e,t,n){"use strict";var i=n(49),s=function(e){return e&&e.__esModule?e:{default:e}}(i);document.addEventListener("DOMContentLoaded",function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{action:"micAccess"})});var t={},n=(0,s.default)(e,t);n.on("speaking",function(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{action:{isSpeaking:!0,isMuted:!1}})})}),n.on("stopped_speaking",function(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{action:{isSpeaking:!1}})})})}).catch(function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.tabs.sendMessage(t[0].id,{error:e.name})})})})},49:function(e,t,n){function i(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=4,s=t.length;i<s;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}var s,a=n(50);"undefined"!=typeof window&&(s=window.AudioContext||window.webkitAudioContext);var o=null;e.exports=function(e,t){var n=new a;if(!s)return n;var t=t||{},r=t.smoothing||.1,c=t.interval||50,l=t.threshold,u=t.play,f=t.history||10,h=!0;o=t.audioContext||o||new s;var p,d,g;g=o.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=r,d=new Float32Array(g.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(p=o.createMediaElementSource(e),void 0===u&&(u=!0),l=l||-50):(p=o.createMediaStreamSource(e),l=l||-50),p.connect(g),u&&g.connect(o.destination),n.speaking=!1,n.suspend=function(){return o.suspend()},n.resume=function(){return o.resume()},Object.defineProperty(n,"state",{get:function(){return o.state}}),o.onstatechange=function(){n.emit("state_change",o.state)},n.setThreshold=function(e){l=e},n.setInterval=function(e){c=e},n.stop=function(){h=!1,n.emit("volume_change",-100,l),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),g.disconnect(),p.disconnect()},n.speakingHistory=[];for(var k=0;k<f;k++)n.speakingHistory.push(0);var m=function(){setTimeout(function(){if(h){var e=i(g,d);n.emit("volume_change",e,l);var t=0;if(e>l&&!n.speaking){for(var s=n.speakingHistory.length-3;s<n.speakingHistory.length;s++)t+=n.speakingHistory[s];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(e<l&&n.speaking){for(var s=0;s<n.speakingHistory.length;s++)t+=n.speakingHistory[s];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>l)),m()}},c)};return m(),n}},50:function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,s=i?arguments[1]:void 0,a=i?arguments[2]:arguments[1];return a._groupName=s,(this.callbacks[e]=this.callbacks[e]||[]).push(a),this},t.once=function(e,t,n){function i(){s.off(e,i),r.apply(this,arguments)}var s=this,a=3===arguments.length,o=a?arguments[1]:void 0,r=a?arguments[2]:arguments[1];return this.on(e,o,i),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,n,i,s;for(t in this.callbacks)for(s=this.callbacks[t],n=0,i=s.length;n<i;n++)s[n]._groupName===e&&(s.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),-1!==n&&(i.splice(n,1),0===i.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,s=[].slice.call(arguments,1),a=this.callbacks[e],o=this.getWildcardCallbacks(e);if(a)for(i=a.slice(),t=0,n=i.length;t<n&&i[t];++t)i[t].apply(this,s);if(o)for(n=o.length,i=o.slice(),t=0,n=i.length;t<n&&i[t];++t)i[t].apply(this,[e].concat(s));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},n.mixin(n)}})});
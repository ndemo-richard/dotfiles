{"version":3,"sources":["../js/index.js"],"names":["AppOptions","AppOption","FormControlLabel","Card","CardContent","Tooltip","FormGroup","Switch","AppBar","Container","Toolbar","Typography","Button","ThemeProvider","MaterialUI","createMuiTheme","colors","withStyles","styles","card","margin","appicon","marginRight","theme","palette","primary","main","secondary","blueGrey","status","danger","functions","optVerbose","app","k","val","bg","WSC","VERBOSE","DEBUG","optAllInterfaces","webapp","interfaces","optIPV6","optPreventSleep","setTimeout","updatedSleepSetting","optBackground","console","log","updateOption","backgroundSettingChange","port","v","assert","opts","optAutoStart","chrome","permissions","request","result","success","remove","window","reload","runtime","setup_events","keydown","evt","metaKey","ctrlKey","keyCode","fgapp","document","body","addEventListener","App","React","Component","state","showAdvanced","started","starting","lasterr","folder","message","constructor","props","classes","init","chromise","getBackgroundPage","appOptions","settings_ready","bind","allOpts","getAll","get_webapp","get","on_status_change","on_webapp_change","setState","ui_ready","get_status","fs","entry","fullPath","computeMessage","JSON","stringify","urls","slice","start","choose_folder","onfolder","onchoosefolder","fileSystem","chooseEntry","type","startStop","checked","stop","onChange","set","render","optDisplay","optDoPortMapping","optRenderIndex","optAdvanced","optCORS","optStatic","optUpload","optModRewriteEnable","optModRewriteRegexp","optModRewriteNegate","optModRewriteTo","renderOpts","_this","options","Object","keys","map","deps","enabled","indent","dep","advOptions","advancedButton","e","preventDefault","WebkitUserSelect","item","url","AppWithStyles","ReactDOM","getElementById"],"mappings":"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","sourcesContent":["import {AppOptions, AppOption} from './options.js'\n\nconst {\n  FormControlLabel,\n  Card,\n  CardContent,\n  Tooltip,\n  FormGroup,\n  Switch,\n  AppBar,\n  Container,\n  Toolbar,\n  Typography,\n  Button,\n  ThemeProvider,\n} = MaterialUI\n\nconst {createMuiTheme, colors, withStyles} = MaterialUI;\nconst styles = {\n  card: {margin: '10px'},\n  appicon: {marginRight: '10px'},\n};\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#3f51b5',\n    },\n    secondary: colors.blueGrey,\n  },\n  status: {\n    danger: 'orange',\n  },\n});\n\n\nconst functions = {\n  optVerbose: function(app, k, val) {\n    const {bg} = app;\n    bg.WSC.VERBOSE = bg.WSC.DEBUG = val\n  },\n  optAllInterfaces: function(app, k, val) {\n    app.webapp.interfaces = []\n  },\n  optIPV6: function(app, k, val) {\n    // reset the list of interfaces\n    app.webapp.interfaces = []\n  },\n  optPreventSleep: function(app, k, val) {\n    // do it after the setting is changed\n    setTimeout(() => {\n      app.webapp.updatedSleepSetting()\n    }, 1);\n  },\n  optBackground: function(app, k, val) {\n    const {webapp, bg} = app;\n    console.log('background setting changed',val)\n\t\twebapp.updateOption('optBackground',val)\n    // appOptions.set('optBackground', val)\n    bg.backgroundSettingChange({'optBackground':val})\n  },\n  port: (app, k, v) => {\n    console.log('persist port', v)\n    console.assert(typeof v === 'number')\n    app.webapp.opts.port = v\n    app.webapp.port = v // does it still need to be set here?\n  },\n  optAutoStart: function(app, k, val) {\n    const {bg, webapp} = app;\n\t\tif (val) {\n\t\t\tchrome.permissions.request({permissions:['background']}, function(result) {\n\t\t\t\tconsole.log('request perm bg',result)\n\t\t\t\tif (result) {\n\t\t\t\t\tsuccess()\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\tchrome.permissions.remove({permissions:['background']}, function(result) {\n\t\t\t\tconsole.log('drop perm bg',result)\n\t\t\t\tsuccess()\n\t\t\t})\n\t\t}\n\t\tfunction success() {\n\t\t\tconsole.log('persist setting start in background',val)\n\t\t\twebapp.opts.optBackground = val\n\t\t\tbg.backgroundSettingChange({'optBackground':val})\n\t\t}\n\t}\n};\n\n\nwindow.reload = chrome.runtime.reload\nsetup_events()\nfunction setup_events() {\n  function keydown(evt) {\n    if (evt.metaKey || evt.ctrlKey) {\n      if (evt.keyCode == 82) {\n        // ctrl-r\n        console.log('received ctrl(meta)-r, reload app')\n        if (window.fgapp) {\n          fgapp.reload()\n        } else {\n          chrome.runtime.reload()\n        }\n      }\n      //evt.preventDefault() // dont prevent ctrl-w\n    }\n  }\n  document.body.addEventListener('keydown', keydown)\n}\n\n\nclass App extends React.Component {\n  state = {\n    showAdvanced: false,\n    interfaces: [],\n    port: 6669,\n    started: false,\n    starting: false,\n    lasterr: null,\n    folder: null,\n    message: '',\n  }\n  constructor(props) {\n    super(props)\n    this.classes = props.classes; // styling api\n    window.app = this\n    console.log('app created');\n    this.init()\n  }\n  async init() {\n    this.bg = await chromise.runtime.getBackgroundPage()\n    this.appOptions = new AppOptions(this.settings_ready.bind(this))\n  }\n  settings_ready() {\n    const allOpts = this.appOptions.getAll()\n    console.log('fetched local settings', this.appOptions, allOpts)\n    this.webapp = this.bg.get_webapp(allOpts) // retainStr in here\n    this.bg.WSC.VERBOSE = this.bg.WSC.DEBUG = this.appOptions.get('optVerbose')\n    this.webapp.on_status_change = this.on_webapp_change.bind(this)\n    this.setState(allOpts);\n    this.on_webapp_change()\n    this.ui_ready()\n  }\n  get_status() {\n    const result = {\n      starting: this.webapp && this.webapp.starting,\n      started: this.webapp && this.webapp.started,\n      lasterr: this.webapp && this.webapp.lasterr,\n      folder: this.webapp &&\n              this.webapp.fs &&\n              this.webapp.fs.entry &&\n              this.webapp.fs.entry.fullPath,\n    }\n    result.message = this.computeMessage(result)\n    return result\n  }\n  computeMessage({started, starting, lasterr}) {\n    if (lasterr) {\n      return JSON.stringify(lasterr)\n    } else if (starting) {\n      return 'STARTING'\n    } else if (started) {\n      return 'STARTED'\n    } else {\n      return 'STOPPED'\n    }\n  }\n  on_webapp_change() {\n    var status = this.get_status()\n    console.log('webapp changed',status)\n    this.setState({\n      ...status,\n      port: this.webapp.port,\n      interfaces: this.webapp.urls.slice()\n    })\n  }\n  ui_ready() {\n    if (this.webapp) {\n      if (! (this.webapp.started || this.webapp.starting)) {\n        // autostart ?\n        this.webapp.start()\n      }\n    }\n  }\n  choose_folder() {\n    console.log('clicked choose folder')\n    function onfolder(folder) {\n      this.bg.onchoosefolder(folder)\n    }\n    chrome.fileSystem.chooseEntry({type:'openDirectory'}, onfolder.bind(this))\n  }\n  startStop(evt, checked) {\n    console.log('startstop', checked)\n    if (checked) this.webapp.start()\n    else this.webapp.stop()\n  }\n  onChange(k, v) {\n\t\tconsole.log('update and save',k,v)\n\t\tthis.webapp.updateOption(k,v) // also set on webapp.opts ?\n    // certain options require special manual handling (e.g. port has to set this.webapp.opts.port)\n    if (functions[k]) {\n      console.log('special handling for', k);\n      functions[k](this, k, v)\n    }\n\t\tthis.appOptions.set(k,v)\n    this.setState({[k]:v})\n  }\n  render() {\n    // option: [dependencies]\n    const optDisplay = {\n      optBackground: null,\n      optAutoStart: ['optBackground'],\n      optAllInterfaces: null,\n      optDoPortMapping: ['optAllInterfaces'],\n      optPreventSleep: null,\n      optRenderIndex: null,\n      port: null,\n    };\n    const optAdvanced = {\n      optCORS: null,\n      optIPV6: null,\n      optStatic: null,\n      optUpload: null,\n      optVerbose: null,\n      optModRewriteEnable: null,\n      optModRewriteRegexp: ['optModRewriteEnable'],\n      optModRewriteNegate: ['optModRewriteEnable'],\n      optModRewriteTo: ['optModRewriteEnable']\n    }\n    console.assert(this)\n\n    const renderOpts = (opts) => {\n      const _this = this;\n      const options = [Object.keys(opts).map(k => {\n        const deps = opts[k] || []\n        let enabled = true\n        let indent = false\n        for (const dep of deps) {\n          indent = true\n          if (!this.state[dep]) {\n            enabled = false\n          }\n        }\n        return <AppOption indent={indent} disabled={!enabled} onChange={this.onChange.bind(this)} name={k} key={k} value={this.state[k]} appOptions={_this.appOptions} />\n      })];\n      return options;\n    }\n\n    const options = renderOpts(optDisplay)\n    const advOptions = renderOpts(optAdvanced)\n    const advancedButton = (<div><a href=\"#\" onClick={e => {\n      e.preventDefault();\n      this.setState({showAdvanced: !this.state.showAdvanced})\n    }}\n    >{this.state.showAdvanced ? 'Hide Advanced Options' : 'Show Advanced Options'}</a></div>)\n    const {state} = this;\n    return (<div>\n      <ThemeProvider theme={theme}>\n\n      <AppBar position=\"static\" color=\"primary\">\n        <Toolbar>\n          <img className={this.classes.appicon} src=\"/images/200ok-64.png\" />\n          <Typography variant=\"h6\" type=\"title\" color=\"inherit\">\n            Web Server for Chrome\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Container>\n      <Card className={this.classes.card}>\n        <CardContent>\n          <p>Please <a\n                      target=\"_blank\"\n                      href=\"https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb/reviews\"\n            >leave a review</a> to help others find this software.\n          </p>\n        </CardContent>\n      </Card>\n\n      <Card className={this.classes.card}>\n        <CardContent>\n\n          <FormGroup>\n            <Tooltip title={'Click to start or stop the web server'}>\n              <FormControlLabel\n                label={`Web Server: ${state.message}`}\n                control={(\n                  <Switch\n                    disabled={state.starting}\n                             checked={state.started}\n                             onChange={this.startStop.bind(this)}\n                  />)}\n              />\n            </Tooltip>\n          </FormGroup>\n\n          <div>\n            <Button variant=\"contained\" onClick={this.choose_folder.bind(this)}>Choose Folder</Button>\n            <span>{state.folder ? ` Current: ${state.folder}` : 'NO FOLDER SELECTED'}</span>\n          </div>\n\n          <h3>Web Server URL(s)</h3>\n          <ul style={{WebkitUserSelect:'text'}}>\n            {state.interfaces.map((item) => {\n              return <li key={item.url}><a href={item.url} target=\"_blank\">{item.url}</a></li>\n            })}\n          </ul>\n        </CardContent>\n      </Card>\n\n      <Card className={this.classes.card}>\n        <CardContent>\n          <Tooltip title={'Some options may require a restart of the server. Restart by pressing the toggle button above'}>\n            <span>Options (may require restart)</span>\n          </Tooltip>\n          \n          {options}\n\n          {advancedButton}\n          {state.showAdvanced && <div>{advOptions}</div>}\n        </CardContent>\n      </Card>\n\n      <Card className={this.classes.card}>\n        <CardContent>\n          <p>Need to <a target=\"_blank\" href=\"https://github.com/kzahel/web-server-chrome/issues\">Report a problem</a>?\n            Open source, MIT license.</p>\n        </CardContent>\n      </Card>\n      </Container>\n\n    </ThemeProvider>\n    </div>)\n  }\n}\n\nconst AppWithStyles = withStyles(styles)(App);\n\nReactDOM.render(<AppWithStyles />, document.getElementById('app'))\n\n"],"file":"index.js"}
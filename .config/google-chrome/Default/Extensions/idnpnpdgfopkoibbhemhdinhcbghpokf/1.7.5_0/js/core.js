var Core={constructDeleteChatPayload:function(){return"ids[0]={{CHAT_ID}}&__user="+currentlyLoggedUserInfo.accountId+"&__a=1&__dyn=&__af=o&__req=l&__be=-1&__pc="+$rootScope.userInfo.pkgCoHort+"&fb_dtsg="+$rootScope.userInfo.token+"&ttstamp=&__rev="+$rootScope.userInfo.revision+"&__srp_t="+$rootScope.userInfo.pageGenTime}};function getChatSummaryObject(){return chatSummaryObj=document.getElementById(CHAT_SUMMARY_DIV_ID),chatSummaryObj}var startDeletion=function(a){this.chatSummaryCount=a.childNodes.length;for(var b,c=0;c<a.childNodes.length;c++)b=a.childNodes[c].getAttribute("id").split(":"),deleteConversation(b[b.length-1])},deleteConversation=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==this.readyState&&200==this.status&&(chatSummaryCount--,!chatSummaryCount&&(deleteUnrreadThreads(),window.setTimeout(function(){tmpChatSummaryObj=getChatSummaryObject(),0<tmpChatSummaryObj.childNodes.length?startDeletion(tmpChatSummaryObj):b(!0)},3500)))},c.open("POST",FB_DEL_CONVERSATION_API,!0),c.send(deletePayload.replace("{{CHAT_ID}}",a))},deleteUnrreadThreads=function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){4!=this.readyState||200!=this.status},a.open("POST",FB_DEL_UNREAD_THREAD_API,!0),a.send("folders[0]:other&__user:"+currentlyLoggedUserInfo.accountId+"&client=mercury")};